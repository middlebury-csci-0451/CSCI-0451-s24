<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.551">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="dcterms.date" content="2023-04-07">

<title>Project Proposal</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../assets/icons/favicon.png" rel="icon" type="image/png">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title"><b>Machine Learning</b> | CSCI 0451 S24</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html"> 
<span class="menu-text">Syllabus</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../schedule.html"> 
<span class="menu-text">Schedule</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../assignments.html"> 
<span class="menu-text">Index of Assignments</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../project.html"> 
<span class="menu-text">Course Project</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#create-the-project-repository" id="toc-create-the-project-repository" class="nav-link active" data-scroll-target="#create-the-project-repository"><span class="header-section-number">1</span> Create the Project Repository</a></li>
  <li><a href="#write-your-project-proposal" id="toc-write-your-project-proposal" class="nav-link" data-scroll-target="#write-your-project-proposal"><span class="header-section-number">2</span> Write Your Project Proposal</a>
  <ul class="collapse">
  <li><a href="#expected-sections" id="toc-expected-sections" class="nav-link" data-scroll-target="#expected-sections">Expected Sections</a></li>
  </ul></li>
  <li><a href="#general-expectations" id="toc-general-expectations" class="nav-link" data-scroll-target="#general-expectations"><span class="header-section-number">3</span> General Expectations</a>
  <ul class="collapse">
  <li><a href="#length" id="toc-length" class="nav-link" data-scroll-target="#length">Length</a></li>
  </ul></li>
  <li><a href="#optional-practice-collaborative-workflows-in-git" id="toc-optional-practice-collaborative-workflows-in-git" class="nav-link" data-scroll-target="#optional-practice-collaborative-workflows-in-git"><span class="header-section-number">4</span> Optional Practice: Collaborative Workflows in Git</a>
  <ul class="collapse">
  <li><a href="#make-a-grid" id="toc-make-a-grid" class="nav-link" data-scroll-target="#make-a-grid">Make a Grid</a></li>
  <li><a href="#play-tic-tac-toe" id="toc-play-tic-tac-toe" class="nav-link" data-scroll-target="#play-tic-tac-toe">Play Tic-Tac-Toe</a></li>
  <li><a href="#merging" id="toc-merging" class="nav-link" data-scroll-target="#merging">Merging</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content page-columns page-full" id="quarto-document-content">

<header id="title-block-header">
<h1 class="title display-7">Project Proposal</h1>

<p class="date">2023-04-07</p>
</header>


<p>The project proposal is your first formal step toward completing your project for this course. In this assignment, you’ll (a) create the shared GitHub repository that will hold your project files and (b) collaboratively create a written description of what you will do, how you will judge its success, and what you intend to learn from the process.</p>
<p>Please note that, in order to complete the proposal, you will need to be in active communication with your project partners. Here’s my suggestion:</p>
<ol type="1">
<li>Meet in person for an hour or two in order to brainstorm big-picture answers to each of the required points.</li>
<li>At the end of your meeting, delegate some of the sections.</li>
<li>Each group member works on “cleaning up” their delegated section into clean, engaging English prose.</li>
<li>Plan one more meeting in which to discuss and make revisions prior to submission.</li>
</ol>
<section id="create-the-project-repository" class="level2" data-number="1">
<h2 data-number="1" class="anchored" data-anchor-id="create-the-project-repository"><span class="header-section-number">1</span> Create the Project Repository</h2>
<p><strong>One</strong> member of the group should go on GitHub.com and create the project repository. This is the central location that will house your project files. After creating the project repository, this group member should add all other group members as collaborators on the project (under Settings –&gt; Manage Access).</p>
<p>All group members should now clone the repository, using either GitHub Desktop or the command line.</p>
<p><strong>Do not fork the project repository</strong>, as this will lead to everyone having their own private version. Not very collaborative!</p>
<p>By the end of this step, you now have a shared repository, under version control, in which you can all collaborate. This is where your project files, including code and data, will live.</p>
</section>
<section id="write-your-project-proposal" class="level2 page-columns page-full" data-number="2">
<h2 data-number="2" class="anchored" data-anchor-id="write-your-project-proposal"><span class="header-section-number">2</span> Write Your Project Proposal</h2>
<p>Write your project proposal in your project repository. For now, you can just use the file <code>README.md</code> to hold your proposal; this has the benefit that GitHub.com will automatically render it for you. Specs for your proposal are below. Here’s what I’m looking for from your proposal:</p>
<section id="expected-sections" class="level3 page-columns page-full">
<h3 class="anchored" data-anchor-id="expected-sections">Expected Sections</h3>
<p>You should include sections in your proposal that address the following topics. Feel free to include additional sections as needed. Remember that you can create Markdown sections using the # character.</p>
<section id="abstract" class="level4">
<h4 class="anchored" data-anchor-id="abstract">Abstract</h4>
<p>In 3-4 sentences, concisely describe:</p>
<ul>
<li>What problem your project addresses.</li>
<li>The overall approach you will use to solve the problem.</li>
<li>How you propose to evaluate your success against your stated goals.</li>
</ul>
</section>
<section id="motivation-and-question" class="level4">
<h4 class="anchored" data-anchor-id="motivation-and-question">Motivation and Question</h4>
<p>Describe your <em>motivation</em> for your project idea. Some (shortened) examples of good types of motivations:</p>
<ul>
<li>We have a scientific data set for which predictive or expoloratory models would help us generate hypotheses.</li>
<li>We have user information for which predictive models would help us give users better experiences.</li>
<li>We have performance data (e.g.&nbsp;from sports teams) for which predictive models could help us make better decisions.</li>
<li>Algorithmic bias is an increasingly urgent challenge as machine learning products proliferate, and we want to explore it more deeply.</li>
</ul>
<p>You should be more specific than these: describe your specific data set (if applicable); your scientific questions; the type of decisions your model could inform; etc.</p>
</section>
<section id="planned-deliverables" class="level4">
<h4 class="anchored" data-anchor-id="planned-deliverables">Planned Deliverables</h4>
<p>Concisely state what you are aiming to create and what capabilities it will have. For most projects, I would expect the deliverable to include:</p>
<ul>
<li>A Python package containing all code used for algorithms and analysis, including documentation.</li>
<li>At least one Jupyter notebook illustrating the use of the package to analyze data.</li>
</ul>
<p>However, your specific idea might imply different deliverables (e.g.&nbsp;an essay). Consult with me if you’re not sure.</p>
<p>You should describe what your deliverable will be able to do and how you will evaluate its effectiveness. <strong>Please consider two scenarios</strong>:</p>
<ul>
<li>“Full success.” What will your deliverable be if everything works out for you exactly as you plan?</li>
<li>“Partial success.” What useful deliverable will you be able to offer even if things don’t 100% work out? For example, maybe you aren’t able to get that webapp together, but you can still create a code repository that showcases the machine learning pipeline needed to use to support the app. Have a contingency plan!</li>
</ul>
<section id="written-deliverables" class="level5">
<h5 class="anchored" data-anchor-id="written-deliverables">Written Deliverables</h5>
<p>You’ll also write a blog post on your project; you don’t have to discuss this post in your proposal though.</p>
</section>
</section>
<section id="resources-required" class="level4">
<h4 class="anchored" data-anchor-id="resources-required">Resources Required</h4>
<p>What resources do you need in order to complete your project? Data? Computing power? An account with a specific service?</p>
<p>Please pay special attention to the question of <strong>data</strong>. If your project idea involves data, include <strong>at least one link</strong> to a data set you can use. If you can’t find data for your original idea, that’s ok! Think of something related to your group’s interests for which you can find data.</p>
<p>Most projects should involve data in some way, but certain projects may not require data. Ask me if you’re not sure.</p>
</section>
<section id="what-you-will-learn" class="level4">
<h4 class="anchored" data-anchor-id="what-you-will-learn">What You Will Learn</h4>
<p>Each group member should return to their stated goals from the <a href="../../assignments/process/goal-setting.html">reflective goal-setting assignment</a> at the beginning of the course. Then, in this section, please state what each group member intends to learn through working on the project, <strong>relating your intentions to your stated goals</strong>. You might be thinking of certain algorithms, software packages, version control, project management, effective teamwork, etc.</p>
</section>
<section id="risk-statement" class="level4">
<h4 class="anchored" data-anchor-id="risk-statement">Risk Statement</h4>
<p>What are two things that could potentially stop you from achieving the full deliverable above? Maybe it turns out that the pattern you thought would be present in the data just doesn’t exist? Or maybe your idea requires more computational power than is available to you? What particular risks might be applicable for your project?</p>
</section>
<section id="ethics-statement" class="level4">
<h4 class="anchored" data-anchor-id="ethics-statement">Ethics Statement</h4>
<p>All projects we undertake involve decisions about whose interests matter; which problems are important; and which tradeoffs are considered acceptable. Take some time to reflect on the potential impacts of your project on its prospective users and the broader world. Address the following questions:</p>
<ol type="1">
<li>What groups of people have the potential to <strong>benefit</strong> from our project?</li>
<li>What groups of people have the potential to be <strong>excluded from benefit</strong> or even <strong>harmed</strong> from our project?</li>
<li>Will the world become an <strong>overall better place</strong> because we made our project? Describe at least 2 <strong>assumptions</strong> behind your answer. For example, if your project aims to make it easier to predict crime, your assumptions might include:
<ul>
<li>Criminal activity is predictable based on other features of a person or location.</li>
<li>The world is a better place when police are able to perform their roles more efficiently.</li>
</ul></li>
</ol>
<p>If your project involves making decisions or recommendations, then you will also need to consider possible forms of algorithmic bias in your work. Here are some relevant examples:</p>
<ul>
<li>A recipe recommendation app can privilege the cuisines of some locales over others. Will your user search recipes by ingredients? Peanut butter and tomato might seem an odd combination in the context of European cuisine, but is common in many traditional dishes of the African diaspora. A similar set of questions applies to recommendation systems related to style or beauty.</li>
<li>A sentiment analyzer must be trained on specific languages. What languages will be included? Will diverse dialects be included, or only the “standard” version of the target language? Who would be excluded by such a choice, and how will you communicate about your limitations?</li>
</ul>
</section>
<section id="tentative-timeline" class="level4 page-columns page-full">
<h4 class="anchored" data-anchor-id="tentative-timeline">Tentative Timeline</h4>
<div class="page-columns page-full"><p>We will have a checkpoint for the project in Week 9 or 10, and then final presentations in Week 12. With this in mind, please describe what you expect to achieve after <strong>three</strong> and <strong>six</strong>. Your goal by the three-week check-in should be to have “something that works.” For example, maybe in three weeks you’ll ready to demonstrate the data acquisition pipeline and show some exploratory analysis, and in the last couple weeks you’ll actually implement your machine learning models. </p><div class="no-row-height column-margin column-container"><span class="margin-aside">The “something that works” idea is related to the common concept of “minimum viable products” in software development, and is visually illustrated here:<br>
<img src="https://miro.medium.com/max/2604/1*aXIr4rEoYwsTLuS2L1-UmQ.png" class="img-fluid" alt="First row: sad faces above a single wheel, two wheels, a car without a roof, and finally a happy face above a completed car. Second row: a face becoming progressively happier above a skateboard, scooter, bicycle, motorcycle, and car."></span></div></div>
</section>
</section>
</section>
<section id="general-expectations" class="level2" data-number="3">
<h2 data-number="3" class="anchored" data-anchor-id="general-expectations"><span class="header-section-number">3</span> General Expectations</h2>
<p>Your proposal is acceptably complete if:</p>
<ol type="1">
<li>The proposal is hosted on GitHub as the top-level README.md file in a repository hosted by one of the group members.</li>
<li>Each team member has made at least two commits to this file, which in total demonstrate substantial commitments to the writing of the proposal.</li>
<li>The proposal contains thoughtful discussion in each of the required sections, which addresses all of the relevant questions posed in each one.</li>
<li>The proposal is written in clear English prose. Within reason, grammatical mistakes are not a problem.<br>
</li>
<li>You have submitted a URL to your GitHub repository on Canvas.</li>
</ol>
<section id="length" class="level3">
<h3 class="anchored" data-anchor-id="length">Length</h3>
<p>There is no specifically required length for the proposal. Generally speaking, I would expect a thoughtful proposal to require around 600-900 words (roughly the length of 2-3 double-spaced pages). However, any length is acceptable provided that it provides thoughtful discussion of each of the required components.</p>
</section>
</section>
<section id="optional-practice-collaborative-workflows-in-git" class="level2" data-number="4">
<h2 data-number="4" class="anchored" data-anchor-id="optional-practice-collaborative-workflows-in-git"><span class="header-section-number">4</span> Optional Practice: Collaborative Workflows in Git</h2>
<p>Your proposal should be written on GitHub and contain commits by multiple team members. This is the same workflow that you’ll use for collaborating on your project itself. If members of your team are not familiar with collaborative workflows in Git and GitHub, then you should complete this activity with your team in order to get up to speed.</p>
<p><em>Working through this mini activity with your group is optional but strongly recommended.</em></p>
<section id="make-a-grid" class="level3">
<h3 class="anchored" data-anchor-id="make-a-grid">Make a Grid</h3>
<p>It’s possible that your repository already has a top-level file named <code>README.md</code>. If not, a new group member (not the one who created the repo) should create one. Then, this group member should create a code block in the file <code>README.md</code> containing a 3x3 grid of dots, like the below:</p>
<pre><code>. . . 
. . .
. . .</code></pre>
<p>Save, commit, and push. All other group members should now pull, so that they have the grid of dots as well.</p>
</section>
<section id="play-tic-tac-toe" class="level3">
<h3 class="anchored" data-anchor-id="play-tic-tac-toe">Play Tic-Tac-Toe</h3>
<p>If you have more than two people, separate into two teams – it’s ok if they are not the same size. Play a few games of <a href="https://en.wikipedia.org/wiki/Tic-tac-toe">Tic-Tac-Toe</a> by replacing the dots in the grid you made with the symbol X or O. Here’s how to make a move:</p>
<ol type="1">
<li>A member of Team X deletes a dot and replaces it with an X.</li>
<li>This member commits and pushes their change.</li>
<li>All other team members pull, so that the move is reflected in their file.</li>
<li>A member of Team O deletes a dot and replaces it with an O…</li>
</ol>
<p>By playing some Tic-Tac-Toe, you practice the fundamental pull-commit-push workflow of collaboration. Make sure that every group member gets a chance to make a move, commit their move, and push at least twice.</p>
</section>
<section id="merging" class="level3">
<h3 class="anchored" data-anchor-id="merging">Merging</h3>
<p>Create a new, blank Tic-Tac-Toe game. Imagine that Team X and Team O miscommunicated about who would go first, so they both make moves simultaneously. Test out the following scenarios.</p>
<p><strong>Scenario 1:</strong></p>
<p>Team X makes the following move:</p>
<pre><code>. . . 
. . .
. X .</code></pre>
<p>Team O makes the following move:</p>
<pre><code>. O . 
. . .
. . .</code></pre>
<p>Both teams should now attempt to commit and push. One team will be prompted to <em>pull</em> prior to pushing. This pull will prompt a <em>merge</em>, since two changes were made to the same file. Observe what happens, commit, and then push. Pull as needed so that both teams have both moves in their file.</p>
<p><strong>Scenario 2:</strong></p>
<p>Team X makes the following move:</p>
<pre><code>. . . 
. X .
. . .</code></pre>
<p>Team O makes the following move:</p>
<pre><code>. . . 
. O .
. . .</code></pre>
<p>The current representative of each team should commit these respective moves, and attempt to push.</p>
<p>Whoops! One team will be prompted to pull, and after pulling will be informed that there is a <em>merge conflict</em> in the repository. Inspect the file. Notice that the relevant part of the file now looks very weird. If you look closely, you can find lines corresponding both to the X move and to the O move. Pick one (arbitrarily), and commit/push the result.</p>
<p>This is an example of the process used to handle merge conflicts, which occur when separate team members have modified the same file in conflicting ways.</p>
<p>It’s recommended, but not required, that your team members take some time on their own to do a little reading on how merge conflicts work. <a href="https://git-scm.com/book/en/v2/Git-Branching-Basic-Branching-and-Merging">This page</a> gives a good explanation, and also covers the (optional but highly useful) topic of <em>branching</em>.</p>


</section>
</section>

<p><br> <br> <span style="color:grey;">© Phil Chodrow, 2024</span></p></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>